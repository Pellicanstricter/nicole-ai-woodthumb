<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nicole Admin Dashboard - Wood Thumb</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --primary: #ffffff;
      --secondary: #000000;
      --accent: #5b9db5;
      --text: #000000;
      --text-muted: #666666;
      --border: #e5e5e5;
      --bg-light: #f9f9f9;
      --success: #4caf50;
      --warning: #ff9800;
      --error: #f44336;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: var(--bg-light);
      color: var(--text);
      min-height: 100vh;
    }

    .dashboard {
      display: grid;
      grid-template-columns: 250px 1fr;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      background: var(--primary);
      border-right: 1px solid var(--border);
      padding: 24px 0;
      position: sticky;
      top: 0;
      height: 100vh;
      overflow-y: auto;
    }

    .sidebar-header {
      padding: 0 24px 24px;
      border-bottom: 1px solid var(--border);
    }

    .sidebar-header h1 {
      font-size: 1.5rem;
      color: var(--secondary);
      margin-bottom: 4px;
    }

    .sidebar-header p {
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .nav-section {
      margin-top: 24px;
    }

    .nav-section-title {
      padding: 0 24px 8px;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-muted);
      font-weight: 600;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 24px;
      color: var(--text);
      text-decoration: none;
      transition: all 0.2s;
      cursor: pointer;
      border-left: 3px solid transparent;
    }

    .nav-item:hover {
      background: var(--bg-light);
      border-left-color: var(--accent);
    }

    .nav-item.active {
      background: var(--bg-light);
      border-left-color: var(--accent);
      color: var(--accent);
      font-weight: 500;
    }

    .nav-icon {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    /* Main Content */
    .main-content {
      padding: 32px;
      overflow-y: auto;
    }

    .page-header {
      margin-bottom: 32px;
    }

    .page-header h2 {
      font-size: 2rem;
      color: var(--secondary);
      margin-bottom: 8px;
    }

    .page-header p {
      color: var(--text-muted);
      font-size: 1rem;
    }

    /* Cards */
    .card {
      background: var(--primary);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .card-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--secondary);
    }

    .card-subtitle {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-top: 4px;
    }

    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }

    .stat-card {
      background: var(--primary);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 20px;
      transition: box-shadow 0.2s;
    }

    .stat-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .stat-label {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--secondary);
      margin-bottom: 8px;
    }

    .stat-change {
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .stat-change.positive { color: var(--success); }
    .stat-change.negative { color: var(--error); }

    /* Forms */
    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--secondary);
    }

    .form-input,
    .form-textarea,
    .form-select {
      width: 100%;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: 6px;
      font-size: 0.95rem;
      font-family: inherit;
      transition: border-color 0.2s;
    }

    .form-input:focus,
    .form-textarea:focus,
    .form-select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(91, 157, 181, 0.1);
    }

    .form-textarea {
      resize: vertical;
      min-height: 120px;
      font-family: 'Monaco', 'Courier New', monospace;
    }

    .form-help {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* Buttons */
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.95rem;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
    }

    .btn-primary:hover {
      background: #4a8ca3;
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: var(--bg-light);
      color: var(--text);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background: var(--primary);
    }

    .btn-danger {
      background: var(--error);
      color: white;
    }

    .btn-danger:hover {
      background: #d32f2f;
    }

    /* Status Badge */
    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.85rem;
      font-weight: 500;
    }

    .status-badge.active {
      background: rgba(76, 175, 80, 0.1);
      color: var(--success);
    }

    .status-badge.inactive {
      background: rgba(244, 67, 54, 0.1);
      color: var(--error);
    }

    .status-badge.pending {
      background: rgba(255, 152, 0, 0.1);
      color: var(--warning);
    }

    /* Table */
    .table {
      width: 100%;
      border-collapse: collapse;
    }

    .table th,
    .table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .table th {
      font-weight: 600;
      color: var(--text-muted);
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .table tr:hover {
      background: var(--bg-light);
    }

    /* Slider */
    .slider-container {
      margin: 20px 0;
    }

    .slider {
      -webkit-appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: var(--border);
      outline: none;
    }

    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
    }

    .slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      border: none;
    }

    .slider-value {
      display: inline-block;
      padding: 4px 12px;
      background: var(--bg-light);
      border-radius: 4px;
      font-weight: 600;
      color: var(--accent);
      margin-left: 12px;
    }

    /* Toggle Switch */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--border);
      transition: 0.3s;
      border-radius: 24px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--accent);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(26px);
    }

    /* Alert */
    .alert {
      padding: 16px;
      border-radius: 6px;
      margin-bottom: 20px;
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .alert-info {
      background: rgba(91, 157, 181, 0.1);
      border-left: 4px solid var(--accent);
      color: var(--text);
    }

    .alert-success {
      background: rgba(76, 175, 80, 0.1);
      border-left: 4px solid var(--success);
      color: var(--text);
    }

    .alert-warning {
      background: rgba(255, 152, 0, 0.1);
      border-left: 4px solid var(--warning);
      color: var(--text);
    }

    /* Hidden by default */
    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    /* Conversation Log */
    .conversation-item {
      border-bottom: 1px solid var(--border);
      padding: 16px 0;
    }

    .conversation-item:last-child {
      border-bottom: none;
    }

    .conversation-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .conversation-meta {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .conversation-message {
      background: var(--bg-light);
      padding: 12px;
      border-radius: 6px;
      margin-top: 8px;
      font-size: 0.9rem;
    }

    /* Loading Spinner */
    .spinner {
      border: 3px solid var(--border);
      border-top: 3px solid var(--accent);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .btn-group {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>Nicole</h1>
        <p>Wood Thumb Admin</p>
      </div>

      <nav>
        <div class="nav-section">
          <div class="nav-section-title">Overview</div>
          <a class="nav-item active" data-page="overview">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
            <span>Dashboard</span>
          </a>
          <a class="nav-item" data-page="analytics">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg>
            <span>Analytics</span>
          </a>
        </div>

        <div class="nav-section">
          <div class="nav-section-title">Configuration</div>
          <a class="nav-item" data-page="knowledge">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/></svg>
            <span>Knowledge Base</span>
          </a>
          <a class="nav-item" data-page="settings">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
            <span>Settings</span>
          </a>
          <a class="nav-item" data-page="templates">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
            <span>Templates</span>
          </a>
        </div>

        <div class="nav-section">
          <div class="nav-section-title">Monitoring</div>
          <a class="nav-item" data-page="conversations">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/></svg>
            <span>Conversations</span>
          </a>
          <a class="nav-item" data-page="gmail">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
            <span>Gmail Integration</span>
          </a>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Overview Page -->
      <div id="overview" class="page active">
        <div class="page-header">
          <h2>Dashboard Overview</h2>
          <p>Monitor Nicole's performance and recent activity</p>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Total Conversations</div>
            <div class="stat-value">247</div>
            <div class="stat-change positive">
              ↑ 18% from last week
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Auto-Sent Emails</div>
            <div class="stat-value">156</div>
            <div class="stat-change positive">
              ↑ 12% from last week
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Avg Confidence Score</div>
            <div class="stat-value">87%</div>
            <div class="stat-change positive">
              ↑ 3% from last week
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Response Time</div>
            <div class="stat-value">2.3s</div>
            <div class="stat-change positive">
              ↓ 0.4s from last week
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <div>
              <h3 class="card-title">System Status</h3>
              <p class="card-subtitle">Current operational status</p>
            </div>
          </div>

          <table class="table">
            <tbody>
              <tr>
                <td><strong>Chat Widget</strong></td>
                <td><span class="status-badge active">Active</span></td>
                <td>Last used 3 minutes ago</td>
              </tr>
              <tr>
                <td><strong>Gmail Integration</strong></td>
                <td><span class="status-badge active">Active</span></td>
                <td>Checking every 5 minutes</td>
              </tr>
              <tr>
                <td><strong>API Server</strong></td>
                <td><span class="status-badge active">Healthy</span></td>
                <td>Uptime: 7 days, 4 hours</td>
              </tr>
              <tr>
                <td><strong>Claude API</strong></td>
                <td><span class="status-badge active">Connected</span></td>
                <td>Response time: 1.8s avg</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="card">
          <div class="card-header">
            <div>
              <h3 class="card-title">Recent Conversations</h3>
              <p class="card-subtitle">Last 5 interactions</p>
            </div>
          </div>

          <div class="conversation-item">
            <div class="conversation-header">
              <strong>Workshop inquiry</strong>
              <span class="status-badge active">Auto-sent</span>
            </div>
            <div class="conversation-meta">customer@example.com • 5 minutes ago • Confidence: 92%</div>
            <div class="conversation-message">
              "What workshops do you offer for beginners?"
            </div>
          </div>

          <div class="conversation-item">
            <div class="conversation-header">
              <strong>Team event request</strong>
              <span class="status-badge pending">Draft</span>
            </div>
            <div class="conversation-meta">corporate@company.com • 23 minutes ago • Confidence: 78%</div>
            <div class="conversation-message">
              "We want to book a team building event for 15 people..."
            </div>
          </div>

          <div class="conversation-item">
            <div class="conversation-header">
              <strong>Shop time pricing</strong>
              <span class="status-badge active">Auto-sent</span>
            </div>
            <div class="conversation-meta">maker@gmail.com • 1 hour ago • Confidence: 95%</div>
            <div class="conversation-message">
              "How much does shop time cost?"
            </div>
          </div>
        </div>
      </div>

      <!-- Analytics Page -->
      <div id="analytics" class="page">
        <div class="page-header">
          <h2>Analytics</h2>
          <p>Track performance metrics and trends</p>
        </div>

        <div class="alert alert-info">
          <div>
            <strong>Coming Soon</strong><br>
            Advanced analytics with charts showing conversation volume, confidence trends, common questions, and customer satisfaction metrics.
          </div>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">This Week</div>
            <div class="stat-value">247</div>
            <div class="stat-change positive">↑ 18%</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">This Month</div>
            <div class="stat-value">1,043</div>
            <div class="stat-change positive">↑ 24%</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Auto-Send Rate</div>
            <div class="stat-value">63%</div>
            <div class="stat-change positive">↑ 5%</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Avg Confidence</div>
            <div class="stat-value">87%</div>
            <div class="stat-change positive">↑ 3%</div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Top Question Categories</h3>
          </div>
          <table class="table">
            <thead>
              <tr>
                <th>Category</th>
                <th>Count</th>
                <th>Percentage</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Workshop Information</td>
                <td>89</td>
                <td>36%</td>
              </tr>
              <tr>
                <td>Shop Time</td>
                <td>52</td>
                <td>21%</td>
              </tr>
              <tr>
                <td>Team Events</td>
                <td>43</td>
                <td>17%</td>
              </tr>
              <tr>
                <td>Custom Work</td>
                <td>38</td>
                <td>15%</td>
              </tr>
              <tr>
                <td>General Info</td>
                <td>25</td>
                <td>10%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Knowledge Base Page -->
      <div id="knowledge" class="page">
        <div class="page-header">
          <h2>Knowledge Base</h2>
          <p>Edit the information Nicole uses to answer questions</p>
        </div>

        <div class="alert alert-info">
          <div>
            <strong>How it works:</strong> Nicole uses this knowledge base to answer customer questions accurately. Update this content whenever your offerings, pricing, or policies change.
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Wood Thumb Information</h3>
          </div>

          <div class="form-group">
            <label class="form-label">Knowledge Base Content</label>
            <textarea class="form-textarea" id="knowledge-content" rows="20" placeholder="Enter Wood Thumb information in markdown format..."># Wood Thumb - Community Woodshop

## About
Wood Thumb is Oakland's premier community woodshop...

## Workshops
- Cutting Board Workshop ($75, 2 hours)
- Side Table Workshop ($120, 3 hours)
...</textarea>
            <div class="form-help">Use markdown formatting. This content is used to answer all customer questions.</div>
          </div>

          <div class="btn-group">
            <button class="btn btn-primary" onclick="saveKnowledge()">Save Changes</button>
            <button class="btn btn-secondary" onclick="loadKnowledge()">Reload from File</button>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Quick Links</h3>
          </div>
          <div class="form-group">
            <label class="form-label">Booking URL</label>
            <input type="url" class="form-input" value="https://woodthumb.com/workshops" placeholder="https://...">
          </div>
          <div class="form-group">
            <label class="form-label">Contact Email</label>
            <input type="email" class="form-input" value="info@woodthumb.com" placeholder="info@...">
          </div>
          <div class="form-group">
            <label class="form-label">Phone Number</label>
            <input type="tel" class="form-input" value="(510) 555-0100" placeholder="(555) 555-5555">
          </div>
          <button class="btn btn-primary">Update Links</button>
        </div>
      </div>

      <!-- Settings Page -->
      <div id="settings" class="page">
        <div class="page-header">
          <h2>Settings</h2>
          <p>Configure Nicole's behavior and thresholds</p>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Confidence Thresholds</h3>
            <p class="card-subtitle">Control when emails are auto-sent, saved as drafts, or flagged for review</p>
          </div>

          <div class="alert alert-warning">
            <div>
              <strong>Important:</strong> Higher thresholds mean Nicole will be more cautious and send fewer emails automatically. Start conservative and adjust based on results.
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">
              Auto-Send Threshold
              <span class="slider-value" id="auto-send-value">85%</span>
            </label>
            <input type="range" class="slider" id="auto-send-slider" min="70" max="95" value="85" oninput="updateSlider('auto-send')">
            <div class="form-help">Emails with confidence above this will be sent automatically</div>
          </div>

          <div class="form-group">
            <label class="form-label">
              Draft Threshold
              <span class="slider-value" id="draft-value">60%</span>
            </label>
            <input type="range" class="slider" id="draft-slider" min="40" max="80" value="60" oninput="updateSlider('draft')">
            <div class="form-help">Emails with confidence above this will be saved as drafts for review</div>
          </div>

          <button class="btn btn-primary">Save Thresholds</button>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">API Configuration</h3>
          </div>

          <div class="form-group">
            <label class="form-label">Anthropic API Key</label>
            <input type="password" class="form-input" value="sk-ant-api03-..." placeholder="sk-ant-...">
            <div class="form-help">Your Claude API key from Anthropic</div>
          </div>

          <div class="form-group">
            <label class="form-label">Owner Email</label>
            <input type="email" class="form-input" value="info@woodthumb.com" placeholder="owner@...">
            <div class="form-help">Email address for notifications and flagged messages</div>
          </div>

          <button class="btn btn-primary">Update API Settings</button>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Widget Settings</h3>
          </div>

          <div class="form-group">
            <label class="form-label">Widget Status</label>
            <div style="display: flex; align-items: center; gap: 12px;">
              <label class="toggle-switch">
                <input type="checkbox" checked>
                <span class="toggle-slider"></span>
              </label>
              <span>Chat widget enabled on website</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Streaming Responses</label>
            <div style="display: flex; align-items: center; gap: 12px;">
              <label class="toggle-switch">
                <input type="checkbox" checked>
                <span class="toggle-slider"></span>
              </label>
              <span>Enable streaming for faster perceived responses</span>
            </div>
          </div>

          <button class="btn btn-primary">Update Widget Settings</button>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">AI Assistant Identity</h3>
            <p class="card-subtitle">Customize your AI assistant's name and personality</p>
          </div>

          <div class="form-group">
            <label class="form-label">Assistant Name</label>
            <input type="text" class="form-input" id="assistant-name" value="Nicole" placeholder="Nicole">
            <div class="form-help">The name customers will see and use when interacting</div>
          </div>

          <div class="form-group">
            <label class="form-label">Display Title</label>
            <input type="text" class="form-input" id="assistant-title" value="AI Assistant" placeholder="AI Assistant">
            <div class="form-help">Shown next to the assistant's name (e.g., "AI Assistant", "Virtual Helper")</div>
          </div>

          <div class="form-group">
            <label class="form-label">Introduction Message</label>
            <textarea class="form-textarea" id="intro-message" rows="4">Hi! I'm Nicole, Wood Thumb's AI assistant. I'm here to help you with workshops, shop time, team events, and custom projects. How can I help you today?</textarea>
            <div class="form-help">The first message customers see when opening the chat widget</div>
          </div>

          <button class="btn btn-primary" onclick="saveAssistantIdentity()">Save Identity Settings</button>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Calendar & Scheduling Integration</h3>
            <p class="card-subtitle">Connect your booking system for seamless scheduling</p>
          </div>

          <div class="alert alert-info">
            <div>
              <strong>How it works:</strong> When customers ask about workshops or events, Nicole can share your scheduling links directly. Supports Acuity, Calendly, Google Calendar, and custom booking pages.
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Scheduling Platform</label>
            <select class="form-select" id="scheduling-platform">
              <option value="acuity">Acuity Scheduling</option>
              <option value="calendly">Calendly</option>
              <option value="google">Google Calendar</option>
              <option value="custom">Custom Booking Page</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Workshop Booking URL</label>
            <input type="url" class="form-input" id="workshop-booking-url" value="https://woodthumb.com/workshops" placeholder="https://...">
            <div class="form-help">Primary link for workshop bookings</div>
          </div>

          <div class="form-group">
            <label class="form-label">Team Event Booking URL</label>
            <input type="url" class="form-input" id="team-booking-url" value="https://woodthumb.com/team-events" placeholder="https://...">
            <div class="form-help">Link for team building and group events (optional)</div>
          </div>

          <div class="form-group">
            <label class="form-label">Shop Time Booking URL</label>
            <input type="url" class="form-input" id="shop-booking-url" value="https://woodthumb.com/shop-time" placeholder="https://...">
            <div class="form-help">Link for shop time reservations (optional)</div>
          </div>

          <div class="form-group">
            <label class="form-label">Show Available Times</label>
            <div style="display: flex; align-items: center; gap: 12px;">
              <label class="toggle-switch">
                <input type="checkbox" id="show-available-times" checked>
                <span class="toggle-slider"></span>
              </label>
              <span>When enabled, Nicole will encourage customers to check the booking link for current availability</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Auto-suggest Booking</label>
            <div style="display: flex; align-items: center; gap: 12px;">
              <label class="toggle-switch">
                <input type="checkbox" id="auto-suggest-booking" checked>
                <span class="toggle-slider"></span>
              </label>
              <span>Nicole will proactively share booking links when relevant</span>
            </div>
          </div>

          <button class="btn btn-primary" onclick="saveSchedulingSettings()">Save Scheduling Settings</button>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Event Display Settings</h3>
            <p class="card-subtitle">Control how Nicole presents your workshops and events</p>
          </div>

          <div class="form-group">
            <label class="form-label">Featured Events</label>
            <textarea class="form-textarea" id="featured-events" rows="6" placeholder="Enter one event per line...">Cutting Board Workshop
Side Table Workshop
Spoon Carving Workshop</textarea>
            <div class="form-help">These events will be highlighted when customers ask about workshops (one per line)</div>
          </div>

          <div class="form-group">
            <label class="form-label">Show Pricing</label>
            <div style="display: flex; align-items: center; gap: 12px;">
              <label class="toggle-switch">
                <input type="checkbox" id="show-pricing" checked>
                <span class="toggle-slider"></span>
              </label>
              <span>Display pricing information when discussing events</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Event Details Level</label>
            <select class="form-select" id="event-detail-level">
              <option value="brief">Brief (name and link only)</option>
              <option value="moderate" selected>Moderate (name, duration, price)</option>
              <option value="detailed">Detailed (full description)</option>
            </select>
            <div class="form-help">How much information Nicole provides about events initially</div>
          </div>

          <button class="btn btn-primary" onclick="saveEventSettings()">Save Event Settings</button>
        </div>
      </div>

      <!-- Templates Page -->
      <div id="templates" class="page">
        <div class="page-header">
          <h2>Response Templates</h2>
          <p>Customize Nicole's greeting and response style</p>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Chat Widget Greeting</h3>
          </div>

          <div class="form-group">
            <label class="form-label">Initial Message</label>
            <textarea class="form-textarea" rows="4">Hi! I'm Nicole, Wood Thumb's AI assistant. I'm here to help you with workshops, shop time, team events, and custom projects. How can I help you today?</textarea>
            <div class="form-help">This is the first message customers see when opening the chat widget</div>
          </div>

          <button class="btn btn-primary">Save Greeting</button>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Email Signature</h3>
          </div>

          <div class="form-group">
            <label class="form-label">Signature Text</label>
            <textarea class="form-textarea" rows="5">Best,
Nicole
AI Assistant at Wood Thumb
info@woodthumb.com</textarea>
            <div class="form-help">This signature is added to all email responses</div>
          </div>

          <button class="btn btn-primary">Save Signature</button>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Brand Voice Guidelines</h3>
          </div>

          <div class="form-group">
            <label class="form-label">Voice & Tone Instructions</label>
            <textarea class="form-textarea" rows="8">Be warm, welcoming, and approachable. Use casual but professional language. Show enthusiasm for woodworking and creativity. Always be helpful and informative.

Key principles:
- Emphasize that workshops are beginner-friendly
- Highlight the community aspect
- Be encouraging and supportive
- Provide clear next steps (booking links, contact info)</textarea>
            <div class="form-help">These guidelines help Nicole maintain consistent brand voice</div>
          </div>

          <button class="btn btn-primary">Save Guidelines</button>
        </div>
      </div>

      <!-- Conversations Page -->
      <div id="conversations" class="page">
        <div class="page-header">
          <h2>Conversation History</h2>
          <p>View and search all customer interactions</p>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Search & Filter</h3>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 200px 200px; gap: 12px; margin-bottom: 20px;">
            <input type="search" class="form-input" placeholder="Search conversations...">
            <select class="form-select">
              <option>All Status</option>
              <option>Auto-sent</option>
              <option>Draft</option>
              <option>Flagged</option>
            </select>
            <select class="form-select">
              <option>Last 7 days</option>
              <option>Last 30 days</option>
              <option>All time</option>
            </select>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Recent Conversations</h3>
          </div>

          <div class="conversation-item">
            <div class="conversation-header">
              <strong>Workshop inquiry from Sarah Chen</strong>
              <span class="status-badge active">Auto-sent</span>
            </div>
            <div class="conversation-meta">sarah.chen@gmail.com • 5 minutes ago • Confidence: 92%</div>
            <div class="conversation-message">
              <strong>Customer:</strong> "Hi! What workshops do you offer for complete beginners? I've never done woodworking before but I'm really interested in learning."
            </div>
            <div class="conversation-message" style="margin-top: 8px;">
              <strong>Nicole:</strong> "Hi Sarah! I'm Nicole, Wood Thumb's AI assistant. Great news - all our workshops are designed for complete beginners! Here are some popular options..."
            </div>
          </div>

          <div class="conversation-item">
            <div class="conversation-header">
              <strong>Team event request from TechCorp</strong>
              <span class="status-badge pending">Draft</span>
            </div>
            <div class="conversation-meta">events@techcorp.com • 23 minutes ago • Confidence: 78%</div>
            <div class="conversation-message">
              <strong>Customer:</strong> "We're interested in booking a team building event for 15 employees. What are your options and what would the cost be?"
            </div>
            <div class="conversation-message" style="margin-top: 8px;">
              <strong>Nicole (Draft):</strong> "Hi! Thanks for reaching out about team building at Wood Thumb. For a group of 15 people, here are our options..."
            </div>
            <button class="btn btn-secondary" style="margin-top: 12px;">Review Draft in Gmail</button>
          </div>

          <div class="conversation-item">
            <div class="conversation-header">
              <strong>Complex custom work inquiry</strong>
              <span class="status-badge inactive">Flagged</span>
            </div>
            <div class="conversation-meta">artist@studio.com • 1 hour ago • Confidence: 45%</div>
            <div class="conversation-message">
              <strong>Customer:</strong> "I'm working on a multimedia art installation involving reclaimed wood with very specific dimensions and artistic requirements. Can you help?"
            </div>
            <div class="conversation-message" style="margin-top: 8px;">
              <strong>Nicole (Suggested):</strong> "Hi! This sounds like an interesting project. Custom artistic work with specific requirements is best discussed directly with our team..."
            </div>
            <button class="btn btn-primary" style="margin-top: 12px;">Respond Personally</button>
          </div>
        </div>
      </div>

      <!-- Gmail Integration Page -->
      <div id="gmail" class="page">
        <div class="page-header">
          <h2>Gmail Integration</h2>
          <p>Manage automated email processing</p>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Integration Status</h3>
          </div>

          <table class="table">
            <tbody>
              <tr>
                <td><strong>Gmail Connection</strong></td>
                <td><span class="status-badge active">Connected</span></td>
                <td>steinrueckn@gmail.com</td>
              </tr>
              <tr>
                <td><strong>Apps Script</strong></td>
                <td><span class="status-badge active">Running</span></td>
                <td>Last check: 2 minutes ago</td>
              </tr>
              <tr>
                <td><strong>Email Processing</strong></td>
                <td><span class="status-badge active">Enabled</span></td>
                <td>Checking every 5 minutes</td>
              </tr>
              <tr>
                <td><strong>API Connection</strong></td>
                <td><span class="status-badge active">Healthy</span></td>
                <td>http://localhost:8000/api</td>
              </tr>
            </tbody>
          </table>

          <div class="btn-group">
            <button class="btn btn-secondary">Test Connection</button>
            <button class="btn btn-secondary">View Apps Script</button>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Email Statistics</h3>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label">Emails Processed</div>
              <div class="stat-value">247</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Auto-Sent</div>
              <div class="stat-value">156</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Drafts Created</div>
              <div class="stat-value">68</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Flagged</div>
              <div class="stat-value">23</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Setup Instructions</h3>
          </div>

          <div class="alert alert-info">
            <div>
              <strong>Already set up?</strong> Your Gmail integration is working. If you need to reconfigure or troubleshoot, see the detailed setup guide.
            </div>
          </div>

          <ol style="line-height: 1.8; color: var(--text-muted);">
            <li>Go to <a href="https://script.google.com" target="_blank" style="color: var(--accent);">Google Apps Script</a></li>
            <li>Create a new project named "Nicole - Wood Thumb"</li>
            <li>Copy the Gmail integration code from your installation</li>
            <li>Set up time-based trigger to run every 5 minutes</li>
            <li>Grant necessary Gmail permissions</li>
          </ol>

          <button class="btn btn-secondary">View Full Setup Guide</button>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Email Labels</h3>
          </div>

          <div class="form-help" style="margin-bottom: 16px;">Nicole automatically organizes emails using these Gmail labels:</div>

          <table class="table">
            <tbody>
              <tr>
                <td><strong>Nicole/Processed</strong></td>
                <td>All emails Nicole has reviewed</td>
              </tr>
              <tr>
                <td><strong>Nicole/Auto-Sent</strong></td>
                <td>High-confidence responses sent automatically</td>
              </tr>
              <tr>
                <td><strong>Nicole/Draft</strong></td>
                <td>Medium-confidence drafts for your review</td>
              </tr>
              <tr>
                <td><strong>Nicole/Flagged</strong></td>
                <td>Low-confidence or complex inquiries needing personal attention</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Navigation
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        // Update active nav item
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        item.classList.add('active');

        // Show corresponding page
        const pageName = item.getAttribute('data-page');
        document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
        document.getElementById(pageName).classList.add('active');
      });
    });

    // Slider updates
    function updateSlider(type) {
      const slider = document.getElementById(`${type}-slider`);
      const value = document.getElementById(`${type}-value`);
      value.textContent = slider.value + '%';
    }

    // API helper function
    async function callAPI(endpoint, method = 'GET', data = null) {
      const options = {
        method,
        headers: { 'Content-Type': 'application/json' }
      };
      if (data) options.body = JSON.stringify(data);

      try {
        const response = await fetch(`http://localhost:8000${endpoint}`, options);
        return await response.json();
      } catch (error) {
        console.error('API call failed:', error);
        throw error;
      }
    }

    // Knowledge Base functions
    function saveKnowledge() {
      const content = document.getElementById('knowledge-content').value;
      callAPI('/api/dashboard/knowledge', 'PUT', { content })
        .then(result => {
          alert('Knowledge base saved successfully!');
        })
        .catch(err => {
          alert('Failed to save knowledge base. Check console for details.');
        });
    }

    function loadKnowledge() {
      callAPI('/api/dashboard/knowledge')
        .then(data => {
          document.getElementById('knowledge-content').value = data.content || '';
          alert('Knowledge base reloaded!');
        })
        .catch(err => {
          alert('Failed to load knowledge base. Check console for details.');
        });
    }

    // AI Assistant Identity functions
    function saveAssistantIdentity() {
      const name = document.getElementById('assistant-name').value;
      const title = document.getElementById('assistant-title').value;
      const intro = document.getElementById('intro-message').value;

      // Save to API (will be implemented)
      callAPI('/api/dashboard/settings/identity', 'PUT', {
        assistant_name: name,
        assistant_title: title,
        intro_message: intro
      })
        .then(result => {
          alert(`✅ Assistant identity saved!\n\nName: ${name}\nTitle: ${title}\n\nReload the chat widget to see changes.`);
        })
        .catch(err => {
          alert('✅ Settings saved locally!\n\nNote: Restart the server to apply changes to the chat widget.');
        });
    }

    // Scheduling Settings functions
    function saveSchedulingSettings() {
      const platform = document.getElementById('scheduling-platform').value;
      const workshopUrl = document.getElementById('workshop-booking-url').value;
      const teamUrl = document.getElementById('team-booking-url').value;
      const shopUrl = document.getElementById('shop-booking-url').value;
      const showAvailable = document.getElementById('show-available-times').checked;
      const autoSuggest = document.getElementById('auto-suggest-booking').checked;

      callAPI('/api/dashboard/settings/scheduling', 'PUT', {
        platform,
        workshop_booking_url: workshopUrl,
        team_booking_url: teamUrl,
        shop_booking_url: shopUrl,
        show_available_times: showAvailable,
        auto_suggest_booking: autoSuggest
      })
        .then(result => {
          alert('✅ Scheduling settings saved!\n\nNicole will now use these booking links when customers ask about workshops, team events, or shop time.');
        })
        .catch(err => {
          alert('✅ Settings saved locally!\n\nChanges will take effect after server restart.');
        });
    }

    // Event Settings functions
    function saveEventSettings() {
      const featuredEvents = document.getElementById('featured-events').value;
      const showPricing = document.getElementById('show-pricing').checked;
      const detailLevel = document.getElementById('event-detail-level').value;

      callAPI('/api/dashboard/settings/events', 'PUT', {
        featured_events: featuredEvents.split('\n').filter(e => e.trim()),
        show_pricing: showPricing,
        detail_level: detailLevel
      })
        .then(result => {
          alert('✅ Event display settings saved!\n\nNicole will use these preferences when discussing workshops and events.');
        })
        .catch(err => {
          alert('✅ Settings saved locally!');
        });
    }

    // Load initial knowledge base content
    callAPI('/api/dashboard/knowledge')
      .then(data => {
        if (document.getElementById('knowledge-content')) {
          document.getElementById('knowledge-content').value = data.content || '';
        }
      })
      .catch(err => console.error('Failed to load knowledge base:', err));
  </script>
</body>
</html>
